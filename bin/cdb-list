#!/usr/bin/env ruby

require "bundler/setup"
require "cdb"
require "cdbtool"

class CDBList < CDBTool::CLI
  def help_info
    "List the contents of a CDB directory"
  end
end

listing = CDBList.new
options = listing.parse(ARGV)

# Print info
cdb = CDB::CDB.new(listing.cdb_path)


cdb.datasets.each do |dataset|
  puts "  #{dataset.id}"
  puts "    LODs: #{dataset.lods.count}"
  puts "    UREFs: #{dataset.urefs.count}"
  puts "    Files: #{dataset.all_files.count}"
end
