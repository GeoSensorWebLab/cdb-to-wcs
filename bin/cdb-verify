#!/usr/bin/env ruby

require "bundler/setup"
require "cdb"
require "cdbtool/cli"

class CDBVerify < CDBTool::CLI
  def help_info
    "Verify a CDB directory has a Tiles directory"
  end
end

validator = CDBVerify.new
options = validator.parse(ARGV)

# Check to see if CDB has Tiles directory
cdb_path = validator.cdb_path

if !Dir.exists?(cdb_path)
  puts "CDB directory does not exist!"
  exit 1
end

if !Dir.exists?(cdb_path + "/Tiles")
  puts "CDB Tiles directory does not exist!"
  exit 1
end

puts "CDB directory appears to be okay."
